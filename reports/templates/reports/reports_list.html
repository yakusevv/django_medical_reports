{% extends 'reports/base_reports.html' %}
{% load i18n %}

{% block title %}
  {{ block.super }} - {% trans "Reports" %}
{% endblock %}

{% block content %}

      {% if request.GET.search %}
      <h5 class='ml-3'> {% trans "Search results for" %} "{{ request.GET.search }}": </h5>
      <h5 class='ml-3'>
        {{ report_list.count }}
        {% if report_list.count == 1%}
        {% trans "item" %}
        {% else %}
        {% trans "items" %}
        {% endif %}
      </h5>
      {% endif %}

      <div class="container">
        <div class="row mb-2 col-md-12">
          <div class="col">
            <b>{% trans "Report" %}</b>
          </div>
          <div class="col">
          <b>{% trans "City" %}</b>
          </div>
          <div class="col">
            <b>{% trans "Date of visit" %}</b>
          </div>
        </div>
      {% for report in report_list %}
        {% if request.user.profile == report.doctor or request.user.is_staff %}

        <div class="row mb-1 col-md-12 {% if forloop.last %}border-bottom{% endif %} border-top" style='{% if report.checked %} color: gray {% endif %}'>
          <div class="col">
            <a href="{{ report.get_absolute_url }}" style='{% if report.checked %} color: gray {% endif %}'>{{ report }}</a>
          </div>
          <div class="col">
            {{ report.city.name }}
          </div>
          <div class="col">
            {{ report.date_of_visit }}
          </div>
        </div>
        {% endif %}
      {% endfor %}
      </div>
{% endblock %}
